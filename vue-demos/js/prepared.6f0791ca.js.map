{"version":3,"sources":["webpack:///./src/views/prepared.vue","webpack:///./src/utils/prepared.js","webpack:///./src/service/base.js","webpack:///src/views/prepared.vue","webpack:///./src/views/prepared.vue?eef2","webpack:///./src/views/prepared.vue?aab3"],"names":["render","_vm","this","_c","_self","staticStyle","attrs","on","search","_v","dataList","comFmter","row","typeDic","type","staticRenderFns","prepared","count","_preparedCount","_preparedResolve","_prepared","reset","Promise","resolve","reject","data","methods","preparedThen","callback","then","prepareSubmit","created","getCompanies","setTimeout","getTypes","getData","comCode","mixins","compDic","component"],"mappings":"iHAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,CAAC,OAAS,UAAU,CAACF,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,WAAWC,GAAG,CAAC,MAAQN,EAAIO,SAAS,CAACP,EAAIQ,GAAG,QAAQN,EAAG,WAAW,CAACG,MAAM,CAAC,KAAOL,EAAIS,WAAW,CAACP,EAAG,kBAAkB,CAACG,MAAM,CAAC,MAAQ,KAAK,KAAO,UAAU,UAAYL,EAAIU,YAAYR,EAAG,kBAAkB,CAACG,MAAM,CAAC,MAAQ,KAAK,KAAO,OAAO,UAAYM,GAAKV,KAAKW,QAAQD,EAAIE,MAAMZ,KAAKW,QAAQD,EAAIE,MAAMF,EAAIE,SAAS,IAAI,IAExcC,EAAkB,GCFP,SAASC,EAASC,EAAQ,GACvC,IAAIC,EACAC,EACAC,EACJ,MAAMC,EAAQ,KACZH,EAAiBD,EACjBG,EAAY,IAAIE,QAAQ,CAACC,EAASC,KAChCL,EAAmBI,KAIvB,OADAF,IACO,CACLI,OACE,MAAO,CACLT,UAAU,IAGdU,QAAS,CACPC,aAAaC,GACXR,EAAUS,KAAKD,IAEjBE,gBACEZ,IACuB,IAAnBA,IACFC,IACAjB,KAAKc,UAAW,KAItBe,UACEV,MC9BC,SAASW,IACd,OAAO,IAAIV,QAAQ,CAACC,EAASC,KAC3BS,WAAW,KACTV,EAAQ,CACN,KAAQ,WACR,KAAQ,WACR,KAAQ,cAET,QAIA,SAASW,IACd,OAAO,IAAIZ,QAAQ,CAACC,EAASC,KAC3BS,WAAW,KACTV,EAAQ,CACN,GAAM,QACN,GAAM,QACN,GAAM,WAEP,OAIA,SAASY,IACd,OAAO,IAAIb,QAAQ,CAACC,EAASC,KAC3BS,WAAW,KACTV,EAAQ,CAAEE,KAAM,CACd,CAAEW,QAAS,OAAQtB,KAAM,MACzB,CAAEsB,QAAS,OAAQtB,KAAM,MACzB,CAAEsB,QAAS,OAAQtB,KAAM,UAE1B,OCfQ,OACfuB,cACAZ,OACA,OACAf,YACA4B,WACAzB,aAGAa,SACAlB,SACA,uBACA2B,aACA,0BAIAxB,cACA,mEAGAoB,UACAC,aACA,eACA,uBAGAE,aACA,eACA,uBAGA,gBCjDkV,I,YCO9UK,EAAY,eACd,EACAvC,EACAe,GACA,EACA,KACA,KACA,MAIa,aAAAwB,E","file":"js/prepared.6f0791ca.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticStyle:{\"margin\":\"120px\"}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.search}},[_vm._v(\"查询\")]),_c('el-table',{attrs:{\"data\":_vm.dataList}},[_c('el-table-column',{attrs:{\"label\":\"公司\",\"prop\":\"comCode\",\"formatter\":_vm.comFmter}}),_c('el-table-column',{attrs:{\"label\":\"类型\",\"prop\":\"type\",\"formatter\":row=>this.typeDic[row.type]?this.typeDic[row.type]:row.type}})],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default function prepared(count = 1) {\n  let _preparedCount\n  let _preparedResolve\n  let _prepared\n  const reset = () => {\n    _preparedCount = count\n    _prepared = new Promise((resolve, reject) => {\n      _preparedResolve = resolve\n    })\n  }\n  reset()\n  return {\n    data() {\n      return {\n        prepared: false\n      }\n    },\n    methods: {\n      preparedThen(callback) {\n        _prepared.then(callback)\n      },\n      prepareSubmit() {\n        _preparedCount--\n        if (_preparedCount === 0) {\n          _preparedResolve()\n          this.prepared = true\n        }\n      }\n    },\n    created() {\n      reset()\n    }\n  }\n}\n","export function getCompanies() {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      resolve({\n        '1001': 'CompanyA',\n        '1002': 'CompanyB',\n        '1003': 'CompanyC',\n      });\n    }, 2200)\n  })\n}\n\nexport function getTypes() {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      resolve({\n        '10': 'Type1',\n        '20': 'Type2',\n        '30': 'Type3',\n      });\n    }, 500)\n  })\n}\n\nexport function getData() {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      resolve({ data: [\n        { comCode: '1001', type: '20' },\n        { comCode: '1002', type: '10' },\n        { comCode: '1003', type: '30' },\n      ]})\n    }, 150)\n  })\n}\n","<template>\n  <div style=\"margin: 120px\">\n    <!-- {{prepared}} -->\n    <el-button type=\"primary\" @click=\"search\">查询</el-button>\n    \n\n    <el-table :data=\"dataList\">\n      <el-table-column label=\"公司\" prop=\"comCode\" :formatter=\"comFmter\"></el-table-column>\n      <el-table-column label=\"类型\" prop=\"type\" :formatter=\"row=>this.typeDic[row.type]?this.typeDic[row.type]:row.type\"></el-table-column>\n    </el-table>\n  </div>\n</template>\n\n<script>\nimport prepared from '@/utils/prepared';\nimport { getCompanies, getTypes, getData } from '@/service/base';\n\nexport default {\n  mixins: [prepared(2)],\n  data() {\n    return {\n      dataList: [],\n      compDic: {},\n      typeDic: {},\n    }\n  },\n  methods: {\n    search() {\n      this.preparedThen(() => {\n        getData().then(res => {\n          this.dataList = res.data;\n        })\n      })\n    },\n    comFmter(row, column) {\n      return this.compDic[row.comCode] ? this.compDic[row.comCode] : row.comCode;\n    }\n  },\n  created() {\n    getCompanies().then(res => {\n      this.compDic = res;\n      this.prepareSubmit();\n    });\n\n    getTypes().then(res => {\n      this.typeDic = res;\n      this.prepareSubmit();\n    });\n\n    this.search();\n  }\n};\n</script>\n\n<style>\n\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./prepared.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./prepared.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./prepared.vue?vue&type=template&id=79adfc60&\"\nimport script from \"./prepared.vue?vue&type=script&lang=js&\"\nexport * from \"./prepared.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}